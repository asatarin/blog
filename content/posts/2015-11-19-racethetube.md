---
date: 2015-11-19T00:00:00Z
title: Быстрее поезда в метро
url: /2015/11/19/racethetube.html
tags: ["running", "personal"]
---

Летом прошлого года я наткнулся на видео, в котором парень выбежал из вагона
поезда в метро, пробежал до следующей станции по улице и забежал в тот же вагон
поезда, из которого выбежал. Вот это видео:

<iframe width="560" height="315" src="https://www.youtube.com/embed/PH_Z8Ghuq6E" frameborder="0" allowfullscreen></iframe>

Видео произвело на меня очень сильное впечатление и я загорелся идеей сделать
такое же видео, но в московском метро.

Понятно, что никто не сможет бежать быстрее поезда и тут весь расчёт на то, что
поезд тратит время на торможение, разгон и остановки. И тут нужно просчитать
между какими станциями метрополитена поезд будет идти примерно такое же время за
которое это же расстояние сможет пробежать подготовленный человек. Я решил
посчитать примерное расстояние между платформами соседних станций и время,
которое поезд тратит проезд между станциями и стоянку на этих станциях.  То, что
расстояние нужно считать именно между платформами это принципиально, потому что
вход на станцию и вагон поезда может разделять длинный эскалатор или лестница.

### Время проезда между станциями метро

Поиск данных о времени проезда поезда между соседними станциями в московском
метро не вызвал затруднений. Я нашёл несколько источников таких данных:

* [SQL таблица](http://www.ordo-crm.ru/metro.sql)
* сервис [Яндекс.Метро](https://metro.yandex.ru/moscow)
<!-- https://gist.github.com/rastyagaev/830193 -->

Сервис Яндекса вызывал больше доверия, поэтому его данными я и воспользовался.

### Расстояние между станциями метро

Нам нужно для каждых двух соседних станций посчитать расстояние между входами в станции
и расстояние от входа до платформы. Первое посчитать довольно просто:
нужно взять GPS координаты для каждой станции и вычислить расстояние между этими координатами.

Данные о координатах станций я взял из [репозитория](https://github.com/nerevar/metroflow),
а они в свою очередь были получены с использованием [Яндекс.Геокодера](https://tech.yandex.ru/maps/doc/geocoder/desc/concepts/About-docpage/). Расстояние между координатами можно посчитать с помощью
двух сервисов: [YOURS](https://wiki.openstreetmap.org/wiki/YOURS#API_documentation), [GraphHopper](https://github.com/graphhopper/web-api). Я выбрал первый, потому что второй сервис платный и для
доступа к API нужен был хотя бы временный ключ. У меня его не оказалось.

С расчётами расстояния между входом на станцию и платформой оказалось сложнее.
Все данные которые получилось найти это глубина заложения каждой станции:

* [Сайт Алексея Гончарова](http://www.alexeygoncharov.com/index1.html)
* [Модель Московского метро в 3D](http://varf.ru/metro3d/?p=-90&t=45&d=41.052558883257646&y=2014)

И зная глубину заложения трудно понять как устроен спуск к платформе и какой длины
лестница или эскалатор.

### Результат

В результате всех расчётов получился график зависимости времени бега между станциями и
времени проезда между этими станциями на поезде метро:

<img src="https://raw.githubusercontent.com/ligurio/moscow-metro/master/run-vs-train.png">

После всех вычислений и выбора наиболее оптимальных станций выяснилось,
что расчёты не учитывали другие факторы. Например в зависимости от времени суток поезда
могут ходить [быстрее или медленнее](http://news.metro.ru/movetime.html). Такие данные можно получить только экспериментальным путём.

После всех расчётов получилась [сводная таблица](https://github.com/ligurio/moscow-metro/blob/master/racethetube-moscow.csv), из которой я выбрал возможные варианты станций:

* [м. Охотный ряд - м. Библиотека им. Ленина](https://metro.yandex.ru/moscow?from=10&to=11&route=0)
* [м. Комсомольская - м. Красные ворота](https://metro.yandex.ru/moscow?from=6&to=7&route=0)
* [м. Университет - м. Проспект Вернадского](https://metro.yandex.ru/moscow?from=17&to=18&route=0)
* [м. Коломенская - м. Каширская](https://metro.yandex.ru/moscow?from=33&to=34&route=0)
* [м. Маяковская - м. Тверская](https://metro.yandex.ru/moscow?from=27&to=28&route=0)
* [м. Cпортивная - м. Воробьевы горы](https://metro.yandex.ru/moscow?from=15&to=16&route=0)
* [м. Кропоткинская - м. Библиотека им. Ленина](https://metro.yandex.ru/moscow?from=11&to=12&route=0)

Жду теперь лета, чтобы можно было проверить расчёты на практике :)

Все результаты расчётов и некоторые исходные данные можно найти в
[репозитории](https://github.com/ligurio/moscow-metro).
